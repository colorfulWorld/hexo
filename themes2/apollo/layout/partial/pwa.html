<script>
    //检测浏览器兼容性，获取通知权限。
    window.addEventListener('load', () => {


        function registerServiceWorker() {
            return navigator.serviceWorker.register('./sw.js')
                .then(registration => {
                    console.log('Service Worker 注册成功，域名: ', registration.scope);
                    return registration;
                })
                .catch(err => {
                    console.error('Service Worker 注册失败: ', err);
                })
        }


        function pushMessage() {
            if (('PushManager' in window)) {
                let promiseChain = new Promise((resolve, reject) => {
                    const permissionPromise = Notification.requestPermission(result => {
                        resolve(result);
                    });
                    if (permissionPromise) {
                        permissionPromise.then(resolve);
                    }
                })
                    .then(result => {
                        if (result === 'granted') {
                            execute();
                        }
                        else {
                            console.log('no permission');
                        }
                    })
            }
        }


        function execute() {
            registerServiceWorker().then(registration => {
                re
            })
        }
    });

</script>