---
title: 工作中所遇到的问题
date: 2019-03-11 16:06:45
categories: 原生JS
---

记录一下自己在工作中所遇到的问题及及解决方案

<!--more-->

## 本地开发 跨域 (基础)

在本地开发 请求线上的接口时 会遇到跨域的问题 那时如何解决的呢？

- 使用 `chrome` 浏览器的跨域设置 （适用与不使用 webpack 打包的项目）
- webpack 配置 `proxyConfig`设置代理

## 查找对象或者中是否有存在某个值

1. `indexOf(1)`;
   对于浅数组使用好用，对于复杂数组，数组嵌套对象再嵌套数组 且是动态取值比较的 用 indexOf 就难比较，因为 indexOf 计较的值一旦索引发生了改变就没有办法比较是否存在某一个对象了。这种情况 将数组进行 JSON.stringfy 后再 indexOf 就可以解决了
2. `arr.find()`
   数组实例的`find()`用于查找目标元素，查不到返回 `undefined`
3. 对象中直接使用`array[kry]`调用，若没有则会返回`undefined`且不会报错。

## 用 jQuery 实现多品类购买的购物车

1. 在页面中能对单个物品进行加减并加入到购物车的操作，保证购物车物品的唯一，最新的特性，考虑到这个情况，是用一下思路解决的：

   - 在点击物品时将物品的单个信息对象保存下来，加减时操作信息对象
   - 点击加入购物车时，将信息对象的 id 拿出来当成对象的 key 值添加到对象中，利用对象 key 的唯一性，且能更好的进行覆盖和删除操作。
   - 在整个流程中利用数组对象的指针特性，改变其中的某一个值影响到原本的对象，保证了多个视图层的数据统一性。

2. 考虑到页面中能进行筛选和搜索（都是从后台重新拿取的数据），重新渲染物品列表导致原本的购物数量的信息丢失。

   - 在从接口获取数组列表时，就比对原本的购物车列表，再进行刷新渲染

3. 因为使用的 jquery,所以想封装一个组件，组件中 监听一个 click 事件 并且可以执行相应的回调， 当时用的事件委托 ，暂时还不知道怎么封装，类似于商品列表的加减器和购物车列表的加减器
