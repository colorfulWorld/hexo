---
title: 尤玉溪-Live
date: 2018-03-07 19:22:24
tags:
---

分析现代前端框架涉及的各个问题领域，各领域目前的主流解决方案，以及未来可能的趋势。

<!--more-->

## 组件的理解和分类

一个应用是一个大函数，一个函数可以调用其他函数，一个组件是一个函数。在 react 中一个组件可以是一个函数，它可以返回一个抽象的数据结构。在实际的应用中，组件是有分类的:

1. 纯展示型组件：数据进 dom 出 。
2. 接入型组件：container component，它会跟数据层的 serves 打交道 ，它会去包含一些跟服务器端或者是数据源打交道的逻辑。container 会将数据传给展示型组件。
3. 交互型组件：比如各类加强版的表单组件，通常强调复用。element UI 以及各种 react 各类组件。
4. 功能型组件： 比如`<router-view>`,`<transition>`,作为一种扩展，抽象机制存在。

## 变化侦测和

### 渲染机制

最重要的是“声明”。
** view = render(state)** 输入是 state 输出是 view。具体的实现可以是 Virtual DOM 和细密度的绑定他们本质是一样的，他们的区别只在于不同场景的更新效率不一样。

### 变化侦测

属性值变化则更改视图

html 中的内联 JS `onclick = clickHandler` 的写法中 clickHandler 的作用域的问题是全局的，在 vue 里面可以这样写的原因是因为我们的在组件里面 JS 的逻辑跟模板或者是 jsx 是一起的。

变化侦测 主要分为 push 、pull 两种：

* push
  vue 的响应式数据和 RX 的 observable 的数据机制使得我们立刻能知道是什么数据改变，就可以实现细腻度的更新。力度太细，那么每一个绑定都会有一个 observable 或者一个 watcher,就会带来一个内存的开销和依赖追踪的开销。所以在 vue2 里面是在组件级别是一个 push，每一个组件是一个响应式的 watcher，在每个组件内部是一个 Virtual DOM。
* pull:
  react 的 subsate 和 angular1 和 2 的脏检查，是属于 pull。是由于不知道什么数据改变了所以需要暴力的遍历比对来查出到底是什么改变了。

## 状态和数据流管理

### 状态管理

vueX 受 reduX 影响。状态管理的本质是相通的。状态管理的本质是从源事件映射到状态的迁移然后再映射到 UI 的变化。所以状态管理这些库就是如何管理将事件源映射到状态变化的这样一个过程，如何将这个映射的过程从视图组件中玻璃出来，提高可维护性，是状态管理需要解决的问题。

* redux 强调的是数据不可变。
* 在 vue 里面数据是可变的，数据是响应式的。

如果是有服务端推送、实时、多个同时发布的话，就可以使用 RX.js 来解决异步请求的问题。

共同的问题 1：是组件的全局状态和局部状态如何区分。一些要共用的状态就提升到全局进行管理:2：全局状态和服务端的数据之间。现在通用的是将服务端的数据抓到全局的 store 里面。

### RX.js

跳过显示状态的改变的过程。直接从事件源映射到结果。一切都有 RX.js 的流来表示。

### 路由

由 url 路径映射到组件。路由的存在的问题：hash 模式 和 history 模式如何兼容如何 forback。

#### web 路由与 app 路由的区别。

web 与 app 的浏览方式是有区别的。

## CSS 管理方案

1. 与 JS 完全解耦，使用预处理器，BEM 这样的编码规范保持可维护性,偏传统。
2. css Modules ， 依然是 css,但是通过编译来避免 CSS 类名的全局冲突。将一个 CSS 文件里面的类名随机化。
3. 各类 css-in-JS 方案，react 社区为代表，比较激进。
4. Vue 的单文件组件 CSS，或是 Angular 的组件 CSS（写在装饰器里面）

传统 css 的问题：

1. 作用域
2. Critical CSS (首屏 CSS)，如果 css 没有在 HTML 之前加载的话就会出现问题。要能侦测到首页所需要的 CSS。（css-in-JS）或者在 vue2.3 里面，在编译过程将 css 的插入和组件的生命周期挂钩。
3. Atomic CSS，整个 css 可以变的更小，css-in-JS 自带 css 优化。
4. 分发复用
5. 跨平台复用

## 构建工具链

## 同构/服务端渲染

## 跨平台渲染

## 类型系统

## 构建时优化

## 运行时优化

## Web Components 和框架的关系

## Web Assembly 和框架的关系
